<!--
File: base.html
# Author: Daniel Arteaga (d4nyart@bu.edu), 09/24/2025 
Description: Base template for the Mini Instagram application.
             Provides common HTML structure, CSS imports, and footer
             that will be inherited by all other templates in the app.
-->
{% load static %}

<html>
    <head>
        <title>Mini Insta</title>
        <link rel="stylesheet" type="text/css" href="{% static 'styles-2.css' %}">
    </head>
    <body>       
        <!-- Main content block that will be replaced by child templates -->
        <h1>Logged in as : {{request.user}}</h1>
        {% block content %}
        {% endblock %}
        
        <!-- Navbar with navigation links -->
        <nav class="navbar">
            <!-- Always show link to all profiles -->
            <a href="{% url 'show_all_profiles' %}">Home (All profiles)</a>
            
            {% if request.user.is_authenticated %}
                <!-- Links for authenticated users -->
                <!-- Get the first profile associated with this user -->
                {% with user_profile=request.user.profile_set.first %}
                    {% if user_profile %}
                        <a href="{% url 'show_profile' pk=user_profile.pk %}">My Profile</a>
                        <a href="{% url 'show_feed' %}">My Feed</a>
                        <a href="{% url 'search' %}">Search</a>
                        <a href="{% url 'create_post' %}">Create Post</a>
                    {% endif %}
                {% endwith %}
                
                <form method="post" action="{% url 'logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit">Logout</button>
                </form>
            {% else %}
                <!-- Link for non-authenticated users -->
                <a href="{% url 'login' %}">Login</a>
                <a href="{% url 'create_profile' %}">Sign In</a>
            {% endif %}
        </nav>
    </body>
</html>