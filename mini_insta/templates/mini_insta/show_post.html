<!--
File: show_post.html
Author: Daniel Arteaga (d4nyart@bu.edu), 09/24/2025 
Description: Template for displaying detailed information about a single post.
             Shows post profile, timestamp, caption, and associated photos.
             Includes update and delete buttons for post management.
-->
{% extends 'mini_insta/base.html' %}

{% block content %}
<div class="post-detail">
    <!-- Post header section showing post ID, author, and timestamp -->
    <div class="post-header">
        <div class="post-profile">Post {{post.pk}} by @{{ post.profile.username }}</div>
        <div class="post-timestamp">on {{ post.timestamp|date:"F d, Y g:i A" }}</div>
    </div>
    
    <!-- Action buttons for post management -->
    <div class="form-actions">
        <a href="{% url 'update_post' pk=post.pk %}" class="submit-btn">Update Post</a> 
        <a href="{% url 'delete_post' pk=post.pk %}" class="submit-btn">Delete Post</a>
    </div>

    <br>
    
    <!-- Post caption text content -->
    <div class="post-caption">{{ post.caption }}</div><br>
    
    <!-- Post images section - displays all photos associated with this post -->
    <div class="post-content">
        <!-- Loop through all photos of the post to display each image -->
        {% for photo in post.get_all_photos %} 
            <img src="{{ photo.get_image_url }}" class="post-image">
        {% endfor %}
    </div>

    <div class="post-engagement">
        <!-- Likes section -->
        <div class="engagement-item">
            <strong>{{ post.get_num_likes }}</strong> 
            {% if post.get_num_likes == 1 %}
                like
            {% else %}
                likes
            {% endif %}
        </div>
                    
        <!-- Comments section -->
        <div class="engagement-item">
            <strong>{{ post.get_all_comments.count }}</strong> 
            {% if post.get_all_comments.count == 1 %}
                comment
            {% else %}
                comments
            {% endif %}
        </div>
    </div>
                
    <!-- Show recent comments if any exist -->
    {% if post.get_all_comments %}
        <div class="recent-comments">
            <h4>Recent Comments:</h4>
            <!-- Show most recent comments -->
            {% for comment in post.get_all_comments%}
                <div class="comment-preview">
                    <strong>@{{ comment.profile.username }}:</strong> {{ comment.text }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endblock %}